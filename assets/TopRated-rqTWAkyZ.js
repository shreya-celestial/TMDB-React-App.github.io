import{r as o,j as s}from"./index-4DSTFKSX.js";import{s as i,F as w,C as F,g as S}from"./getMovies-Oew6AxLa.js";import{u as N}from"./useQuery-s7zNTEwp.js";const C=()=>{const[u,h]=o.useState("topRatedConts"),[r,c]=o.useState(1),[m,p]=o.useState({}),[l,a]=o.useState([]),[x,f]=o.useState(1),{data:e,isPending:g,isError:d,error:j}=N({queryKey:["movies",{funcToSend:u,page:r,filters:m}],queryFn:({signal:t,queryKey:n})=>S({signal:t,...n[1]})});o.useEffect(()=>{!d&&e&&(f(e==null?void 0:e.total_pages),a(t=>[...t,...e==null?void 0:e.results]))},[e]),o.useEffect(()=>{window.scrollTo(0,0)},[]);const v=t=>{a([]),window.scrollTo(0,0),p(t),c(1),h("filterConts")};return window.onscroll=()=>{const{scrollTop:t,scrollHeight:n,clientHeight:T}=document.documentElement;t+T>=n-5&&r<=x&&c(E=>E+1)},s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:i.heading,children:"Top Rated Movies"}),s.jsx(w,{handleFilters:v}),(e==null?void 0:e.total_results)!==0?"":s.jsx("div",{className:i.contentsDiv,children:s.jsx("h2",{children:"Nothing to show!"})}),l.length?s.jsx("div",{className:i.contentsDiv,children:l.map((t,n)=>s.jsx(F,{data:t},n))}):"",g&&s.jsx("div",{className:i.contentsDiv,children:s.jsx("h2",{children:"Loading..."})}),d&&s.jsx("div",{className:i.contentsDiv,children:s.jsx("h2",{children:j})})]})};export{C as default};
