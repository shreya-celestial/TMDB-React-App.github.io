import{r as o,j as s}from"./index-4DSTFKSX.js";import{s as r,F,C as S,g as T}from"./getMovies-Oew6AxLa.js";import{u as N}from"./useQuery-s7zNTEwp.js";const C=()=>{const[u,h]=o.useState("popularConts"),[i,l]=o.useState(1),[m,p]=o.useState({}),[c,a]=o.useState([]),[x,f]=o.useState(1),{data:e,isPending:g,isError:d,error:j}=N({queryKey:["movies",{funcToSend:u,page:i,filters:m}],queryFn:({signal:t,queryKey:n})=>T({signal:t,...n[1]})});o.useEffect(()=>{!d&&e&&(f(e==null?void 0:e.total_pages),a(t=>[...t,...e==null?void 0:e.results]))},[e]),o.useEffect(()=>{window.scrollTo(0,0)},[]);const v=t=>{a([]),window.scrollTo(0,0),p(t),l(1),h("filterConts")};return window.onscroll=()=>{const{scrollTop:t,scrollHeight:n,clientHeight:E}=document.documentElement;t+E>=n-5&&i<=x&&l(w=>w+1)},s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:r.heading,children:"Popular Movies"}),s.jsx(F,{handleFilters:v}),(e==null?void 0:e.total_results)!==0?"":s.jsx("div",{className:r.contentsDiv,children:s.jsx("h2",{children:"Nothing to show!"})}),c.length?s.jsx("div",{className:r.contentsDiv,children:c.map((t,n)=>s.jsx(S,{data:t},n))}):"",g&&s.jsx("div",{className:r.contentsDiv,children:s.jsx("h2",{children:"Loading..."})}),d&&s.jsx("div",{className:r.contentsDiv,children:s.jsx("h2",{children:j})})]})};export{C as default};
